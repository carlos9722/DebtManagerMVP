@if (isLoading()) {
  <div class="flex items-center justify-center py-20">
    <span class="loading loading-spinner loading-lg text-secondary"></span>
  </div>
} @else if (debtors().length === 0) {
  <div class="text-center py-20">
    <p class="text-slate-600">No hay deudores registrados</p>
  </div>
} @else {
  <div class="overflow-x-auto">
    <table class="table bg-white">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Email</th>
          <th>Tel√©fono</th>
          <th>Notas</th>
          <th class="text-right">Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (debtor of debtors(); track debtor.id) {
          <tr class="hover">
            <td>
              <div class="font-semibold">{{ debtor.name }}</div>
            </td>
            <td>
              @if (debtor.email) {
                <span class="text-slate-600">{{ debtor.email }}</span>
              } @else {
                <span class="text-slate-400">-</span>
              }
            </td>
            <td>
              @if (debtor.phone) {
                <span class="text-slate-600">{{ debtor.phone }}</span>
              } @else {
                <span class="text-slate-400">-</span>
              }
            </td>
            <td>
              @if (debtor.notes) {
                <span class="text-slate-600 line-clamp-1 max-w-xs">{{ debtor.notes }}</span>
              } @else {
                <span class="text-slate-400">-</span>
              }
            </td>
            <td>
              <div class="flex justify-end gap-2">
                <button
                  class="btn btn-sm btn-primary btn-outline gap-1"
                  (click)="onViewDebts.emit(debtor)"
                  title="Ver deudas"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                  Deudas
                </button>
                <button
                  class="btn btn-sm btn-ghost"
                  (click)="onEdit.emit(debtor)"
                  title="Editar"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                    />
                  </svg>
                </button>
                <button
                  class="btn btn-sm btn-ghost text-error"
                  (click)="onDelete.emit(debtor)"
                  title="Eliminar"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                    />
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
}

